<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kdam+Thmor+Pro&display=swap');

        body { background-color: #ffffff; } /* Change background color to white */
        
        .timer {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-family: 'Kdam Thmor Pro';
            color: black; /* Change text color to black */
            border: 2px solid black; /* Add border */
            padding: 10px; /* Add padding */
        }
    </style>
</head>
<body>
    <div class="timer"></div>

    <script>
        let startTimestamp = Date.now();
        let procrastinationTime = 0;

        // Function to update the timer every second
        function updateTimer() {
            const currentTime = Date.now();
            const elapsedTime = currentTime - startTimestamp;
            const totalSeconds = Math.floor(elapsedTime / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;

            const timerElement = document.querySelector('.timer');
            timerElement.textContent = `Procrastination Time: ${formatTime(hours)}:${formatTime(minutes)}:${formatTime(seconds)}`;

            procrastinationTime = totalSeconds;
        }

        // Function to format time to two digits
        function formatTime(time) {
            return time < 10 ? `0${time}` : time;
        }

        // Call updateTimer every second
        const intervalId = setInterval(updateTimer, 1000);

        // Stop and save the timer when the source goes offline
        window.addEventListener('offline', () => {
            clearInterval(intervalId);
            console.log('Source is offline. Procrastination time saved:', procrastinationTime);
        });

        // Resume the timer when the source comes back online
        window.addEventListener('online', () => {
            startTimestamp = Date.now() - (procrastinationTime * 1000);
            intervalId = setInterval(updateTimer, 1000);
            console.log('Source is back online.');
        });
    </script>
</body>
</html>
